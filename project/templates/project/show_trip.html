<!-- project/templates/project/show_trip.html -->
{% extends 'project/base.html' %}

{% block content %}
<div class="page-header">
    <h1>{{ trip.name }}</h1>
    <p>{{ trip.description }}</p>
</div>

<!-- Plans Section -->
<div class="plans-section">
    <h2>Plans</h2>
    <div class="plans-buttons">
        {% for plan in trip.get_plans %}
            <button class="plan-btn {% if plan.is_selected %}selected{% endif %}">
                {{ plan.name }}
            </button>
        {% empty %}
            <!-- No plans exist, show create button -->
        {% endfor %}
        
        <!-- Always show the create new plan button -->
        <button class="plan-btn new-plan-btn" onclick="location.href='{% url 'create_plan' trip.pk %}'">+ Create New Plan</button>
    </div>
</div>

<!-- Trip Details -->
<div class="trip-details">
    <div class="trip-info">
        <h3>Trip Information</h3>
        <p><strong>Start Date:</strong> {{ trip.start_date|date:"F j, Y" }}</p>
        <p><strong>End Date:</strong> {{ trip.end_date|date:"F j, Y" }}</p>
        <p><strong>Status:</strong> {{ trip.get_status_display }}</p>
        {% if trip.budget_limit %}
            <p><strong>Budget Limit:</strong> ${{ trip.budget_limit }}</p>
        {% endif %}
    </div>
</div>

<style>
.plans-section {
    margin-bottom: 30px;
    padding: 20px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.plans-section h2 {
    margin-bottom: 15px;
    color: #333;
}

.plans-buttons {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.plan-btn {
    padding: 10px 20px;
    border: 2px solid #ddd;
    background: white;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
}

.plan-btn:hover {
    border-color: #3b5998;
    background: #f0f2ff;
}

.plan-btn.selected {
    background: #3b5998;
    color: white;
    border-color: #3b5998;
}

.new-plan-btn {
    background: #5cb85c;
    color: white;
    border-color: #5cb85c;
}

.new-plan-btn:hover {
    background: #449d44;
    border-color: #449d44;
}

.trip-details {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.trip-info h3 {
    margin-bottom: 15px;
    color: #333;
}

.trip-info p {
    margin-bottom: 8px;
}
</style>
{% endblock %}