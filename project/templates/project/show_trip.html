<!-- project/templates/project/show_trip.html -->
{% extends 'project/base.html' %}

{% block content %}
{% if not user.is_authenticated %}
    <div class="auth-required">
        <h2>Login Required</h2>
        <p>You must be logged in to view this page.</p>
        <a href="{% url 'login' %}">Login</a>
    </div>
{% else %}
<div class="page-header">
    <h1>{{ trip.name }}</h1>
    <p>{{ trip.description }}</p>
</div>

<!-- Plans Section -->
<div class="plans-section">
    <h2>Plans</h2>
    <div class="plans-buttons">
        {% for plan in trip.get_plans %}
            <button class="plan-btn {% if plan.is_selected %}selected{% endif %}">
                {{ plan.name }}
            </button>
        {% empty %}
            <!-- No plans exist, show create button -->
        {% endfor %}
        
        <!-- Always show the create new plan button -->
        <button class="plan-btn new-plan-btn" onclick="location.href='{% url 'create_plan' trip.pk %}'">+ Create New Plan</button>
    </div>
</div>

<!-- Destination Section -->
<div class="destination-card">
    <div class="destination-header">
        <h4>{{ destination.city }}</h4>
        <span class="country">{{ destination.country }}</span>
    </div>
    <div class="destination-details">
        {% if destination.nights_staying %}
            <span class="detail">{{ destination.nights_staying }} nights</span>
        {% endif %}
        {% if destination.estimated_cost %}
            <span class="detail cost">${{ destination.estimated_cost }}</span>
        {% endif %}
    </div>
</div>


<!-- New Tabbed Section -->
<div class="tabbed-section">
    <div class="tab-navigation">
        <button class="tab-btn active" data-tab="flights">Flights</button>
        <button class="tab-btn" data-tab="housing">Housing</button>
        <button class="tab-btn" data-tab="list">List</button>
    </div>
    
    <!-- Flights Tab Content -->
    <div class="tab-content active" id="flights-tab">
        <div class="tab-header">
            <h3>Flight Search</h3>
        </div>
        
        <!-- Flight Search Form -->
        <div class="flight-search-container">
            <form id="flight-search-form" class="flight-search-form">
                {% csrf_token %}
                <div class="search-row">
                    <div class="search-field">
                        <label for="{{ flight_search_form.departure_city.id_for_label }}">From:</label>
                        {{ flight_search_form.departure_city }}
                    </div>
                    <div class="search-field">
                        <label for="{{ flight_search_form.arrival_city.id_for_label }}">To:</label>
                        {{ flight_search_form.arrival_city }}
                    </div>
                    <div class="search-field">
                        <label for="{{ flight_search_form.departure_date.id_for_label }}">Departure:</label>
                        {{ flight_search_form.departure_date }}
                    </div>
                    <div class="search-field">
                        <label for="{{ flight_search_form.return_date.id_for_label }}">Return (Optional):</label>
                        {{ flight_search_form.return_date }}
                    </div>
                </div>
                
                <div class="search-row">
                    <div class="search-field">
                        <label for="{{ flight_search_form.travel_class.id_for_label }}">Class:</label>
                        {{ flight_search_form.travel_class }}
                    </div>
                    <div class="search-field">
                        <label for="{{ flight_search_form.adults.id_for_label }}">Adults:</label>
                        {{ flight_search_form.adults }}
                    </div>
                    <div class="search-field search-button">
                        <button type="submit" class="btn btn-primary">Search Flights</button>
                    </div>
                </div>
            </form>
        </div>
        
        <!-- Loading indicator -->
        <div id="flight-loading" class="loading-indicator" style="display: none;">
            <div class="loading-spinner"></div>
            <p>Searching for flights...</p>
        </div>
        
        <!-- Flight Results -->
        <div id="flight-results" class="flight-results" style="display: none;">
            <div class="results-header">
                <h4>Flight Results</h4>
                <div class="results-count"></div>
            </div>
            <div class="flight-list"></div>
            
            <!-- Pagination -->
            <div class="flight-pagination" style="display: none;">
                <button id="prev-flights" class="page-btn" disabled>← Previous</button>
                <span class="page-info"></span>
                <button id="next-flights" class="page-btn">Next →</button>
            </div>
        </div>
    </div>
    
    <!-- Housing Tab Content -->
    <div class="tab-content" id="housing-tab">
        <div class="tab-header">
            <h3>Accommodation Options</h3>
            <button class="add-btn">+ Add Accommodation</button>
        </div>
        <div class="content-list">
            <div class="list-item housing-item">
                <div class="item-main">
                    <div class="housing-name">Hotel Plaza Paris</div>
                    <div class="housing-details">
                        <span class="location">Champs-Élysées, Paris</span>
                        <span class="rating">★★★★☆ (4.2)</span>
                    </div>
                </div>
                <div class="item-price">$150/night</div>
                <div class="item-actions">
                    <button class="btn-select">Select</button>
                </div>
            </div>
            
            <div class="list-item housing-item">
                <div class="item-main">
                    <div class="housing-name">Le Marais Apartment</div>
                    <div class="housing-details">
                        <span class="location">Le Marais, Paris</span>
                        <span class="rating">★★★★★ (4.8)</span>
                    </div>
                </div>
                <div class="item-price">$120/night</div>
                <div class="item-actions">
                    <button class="btn-select">Select</button>
                </div>
            </div>
            
            <!-- Pagination -->
            <div class="pagination">
                <button class="page-btn" disabled>← Previous</button>
                <span class="page-info">Page 1 of 2</span>
                <button class="page-btn">Next →</button>
            </div>
        </div>
    </div>
    
    <!-- List Tab Content -->
    <div class="tab-content" id="list-tab">
        <div class="tab-header">
            <h3>Custom List</h3>
            <button class="add-btn" onclick="showAddItemForm()">+ Add Item</button>
        </div>
        
        <!-- Add Item Form (hidden by default) -->
        <div class="add-item-form" id="add-item-form" style="display: none;">
            <div class="form-group">
                <input type="text" id="item-title" placeholder="Item title" class="form-input">
            </div>
            <div class="form-group">
                <textarea id="item-description" placeholder="Description (optional)" class="form-input"></textarea>
            </div>
            <div class="form-actions">
                <button class="btn-save" onclick="addCustomItem()">Save Item</button>
                <button class="btn-cancel" onclick="hideAddItemForm()">Cancel</button>
            </div>
        </div>
        
        <div class="content-list">
            <div class="list-item custom-item">
                <div class="item-main">
                    <div class="item-title">Visit Eiffel Tower</div>
                    <div class="item-description">Must-see landmark, go during sunset</div>
                </div>
                <div class="item-actions">
                    <button class="btn-edit">Edit</button>
                    <button class="btn-delete">Delete</button>
                </div>
            </div>
            
            <div class="list-item custom-item">
                <div class="item-main">
                    <div class="item-title">Book restaurant reservation</div>
                    <div class="item-description">Le Comptoir du Relais - need to call ahead</div>
                </div>
                <div class="item-actions">
                    <button class="btn-edit">Edit</button>
                    <button class="btn-delete">Delete</button>
                </div>
            </div>
            
            <!-- Pagination -->
            <div class="pagination">
                <button class="page-btn" disabled>← Previous</button>
                <span class="page-info">Page 1 of 1</span>
                <button class="page-btn" disabled>Next →</button>
            </div>
        </div>
    </div>
</div>

<!-- Trip Details -->
<div class="trip-details">
    <div class="trip-info">
        <h3>Trip Information</h3>
        <p><strong>Start Date:</strong> {{ trip.start_date|date:"F j, Y" }}</p>
        <p><strong>End Date:</strong> {{ trip.end_date|date:"F j, Y" }}</p>
        <p><strong>Status:</strong> {{ trip.get_status_display }}</p>
        {% if trip.budget_limit %}
            <p><strong>Budget Limit:</strong> ${{ trip.budget_limit }}</p>
        {% endif %}
    </div>
</div>

<script>
// Tab functionality
document.addEventListener('DOMContentLoaded', function() {
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');
    
    tabBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const targetTab = this.dataset.tab;
            
            // Remove active class from all tabs and contents
            tabBtns.forEach(b => b.classList.remove('active'));
            tabContents.forEach(c => c.classList.remove('active'));
            
            // Add active class to clicked tab and corresponding content
            this.classList.add('active');
            document.getElementById(targetTab + '-tab').classList.add('active');
        });
    });
});

// Flight Search Functionality
let currentSearchParams = {};
let nextPageToken = null;

document.getElementById('flight-search-form').addEventListener('submit', function(e) {
    e.preventDefault();
    searchFlights();
});

function searchFlights(pageToken = null) {
    const form = document.getElementById('flight-search-form');
    const formData = new FormData(form);
    
    // Build search parameters
    const searchParams = {
        departure_city: formData.get('departure_city'),
        arrival_city: formData.get('arrival_city'),
        departure_date: formData.get('departure_date'),
        return_date: formData.get('return_date'),
        travel_class: formData.get('travel_class'),
        adults: formData.get('adults'),
    };
    
    // Add page token if provided
    if (pageToken) {
        searchParams.page_token = pageToken;
    }
    
    // Store current search params
    currentSearchParams = searchParams;
    
    // Show loading
    document.getElementById('flight-loading').style.display = 'block';
    document.getElementById('flight-results').style.display = 'none';
    
    // Make AJAX request
    fetch(`{% url 'search_flights' trip.pk %}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
        },
        body: JSON.stringify(searchParams)
    })
    .then(response => response.json())
    .then(data => {
        document.getElementById('flight-loading').style.display = 'none';
        
        if (data.error) {
            alert('Error: ' + data.error);
            return;
        }
        
        displayFlightResults(data);
    })
    .catch(error => {
        document.getElementById('flight-loading').style.display = 'none';
        alert('Error searching for flights: ' + error.message);
    });
}

function displayFlightResults(data) {
    const resultsContainer = document.getElementById('flight-results');
    const flightList = resultsContainer.querySelector('.flight-list');
    const resultsCount = resultsContainer.querySelector('.results-count');
    
    // Clear previous results
    flightList.innerHTML = '';
    
    // Update results count
    resultsCount.textContent = `Found ${data.flights.length} flights`;
    
    // Display flights
    data.flights.forEach(flight => {
        const flightCard = createFlightCard(flight);
        flightList.appendChild(flightCard);
    });
    
    // Update pagination
    updateFlightPagination(data.pagination);
    
    // Show results
    resultsContainer.style.display = 'block';
}

function createFlightCard(flight) {
    const card = document.createElement('div');
    card.className = 'flight-card';
    
    const stopsText = flight.stops === 0 ? 'Nonstop' : 
                     flight.stops === 1 ? '1 stop' : `${flight.stops} stops`;
    
    card.innerHTML = `
        <div class="flight-card-content">
            <div class="flight-route">
                <div class="airport-info">
                    <div class="airport-code">${flight.departure_code}</div>
                    <div class="airport-time">${formatTime(flight.departure_time)}</div>
                </div>
                <div class="flight-duration">
                    <div class="duration-line">
                        <span class="duration-text">${flight.duration_formatted}</span>
                        <div class="route-line"></div>
                    </div>
                    <div class="stops-info">${stopsText}</div>
                </div>
                <div class="airport-info">
                    <div class="airport-code">${flight.arrival_code}</div>
                    <div class="airport-time">${formatTime(flight.arrival_time)}</div>
                </div>
            </div>
            
            <div class="flight-details">
                <div class="airline-info">
                    <img src="${flight.airline_logo}" alt="${flight.airline}" class="airline-logo" onerror="this.style.display='none'">
                    <span class="airline-name">${flight.airline}</span>
                </div>
                <div class="flight-price">
                    <span class="price">${flight.price}</span>
                    <span class="price-label">per person</span>
                </div>
            </div>
        </div>
        
        <div class="flight-actions">
            <button class="add-to-list-btn" onclick="addFlightToList('${flight.booking_token}')">
                + Add to List
            </button>
        </div>
    `;
    
    return card;
}

function formatTime(timeString) {
    if (!timeString) return 'N/A';
    
    // Extract time from datetime string (assuming format like "2025-06-27 15:30")
    const timePart = timeString.split(' ')[1];
    if (!timePart) return timeString;
    
    const [hours, minutes] = timePart.split(':');
    const hour24 = parseInt(hours);
    const hour12 = hour24 === 0 ? 12 : hour24 > 12 ? hour24 - 12 : hour24;
    const ampm = hour24 >= 12 ? 'PM' : 'AM';
    
    return `${hour12}:${minutes} ${ampm}`;
}

function updateFlightPagination(pagination) {
    const paginationContainer = document.querySelector('.flight-pagination');
    const pageInfo = paginationContainer.querySelector('.page-info');
    const prevBtn = document.getElementById('prev-flights');
    const nextBtn = document.getElementById('next-flights');
    
    // Update page info
    pageInfo.textContent = `Showing ${pagination.current_from}-${pagination.current_to}`;
    
    // Update pagination buttons
    nextBtn.disabled = !pagination.has_next;
    nextPageToken = pagination.next_page_token;
    
    // Show pagination if there are multiple pages
    if (pagination.has_next || pagination.current_from > 1) {
        paginationContainer.style.display = 'flex';
    } else {
        paginationContainer.style.display = 'none';
    }
}

// Pagination event listeners
document.getElementById('next-flights').addEventListener('click', function() {
    if (nextPageToken) {
        searchFlights(nextPageToken);
    }
});

function addFlightToList(bookingToken) {
    // Placeholder for adding flight to trip list
    // This will be implemented later
    console.log('Adding flight to list:', bookingToken);
    alert('Flight added to list! (Feature will be implemented later)');
}

// Custom list functionality (existing code)
function showAddItemForm() {
    document.getElementById('add-item-form').style.display = 'block';
}

function hideAddItemForm() {
    document.getElementById('add-item-form').style.display = 'none';
    document.getElementById('item-title').value = '';
    document.getElementById('item-description').value = '';
}

function addCustomItem() {
    const title = document.getElementById('item-title').value;
    const description = document.getElementById('item-description').value;
    
    if (!title.trim()) {
        alert('Please enter a title for the item');
        return;
    }
    
    // Create new list item
    const contentList = document.querySelector('#list-tab .content-list');
    const pagination = contentList.querySelector('.pagination');
    
    const newItem = document.createElement('div');
    newItem.className = 'list-item custom-item';
    newItem.innerHTML = `
        <div class="item-main">
            <div class="item-title">${title}</div>
            <div class="item-description">${description}</div>
        </div>
        <div class="item-actions">
            <button class="btn-edit">Edit</button>
            <button class="btn-delete" onclick="this.parentElement.parentElement.remove()">Delete</button>
        </div>
    `;
    
    contentList.insertBefore(newItem, pagination);
    hideAddItemForm();
}


</script>
{% endif %}

<style>

.destinations-section {
    margin-bottom: 30px;
    padding: 20px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.destinations-section h2 {
    margin-bottom: 15px;
    color: #333;
}

.plans-section {
    margin-bottom: 30px;
    padding: 20px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.plans-section h2 {
    margin-bottom: 15px;
    color: #333;
}

.plans-buttons {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.plan-btn {
    padding: 10px 20px;
    border: 2px solid #ddd;
    background: white;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
}

.plan-btn:hover {
    border-color: #3b5998;
    background: #f0f2ff;
}

.plan-btn.selected {
    background: #3b5998;
    color: white;
    border-color: #3b5998;
}

.new-plan-btn {
    background: #5cb85c;
    color: white;
    border-color: #5cb85c;
}

.new-plan-btn:hover {
    background: #449d44;
    border-color: #449d44;
}

/* Flight Search Styles */
.flight-search-container {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 30px;
}

.flight-search-form {
    max-width: none;
}

.search-row {
    display: flex;
    gap: 15px;
    margin-bottom: 15px;
    align-items: end;
}

.search-field {
    flex: 1;
    min-width: 150px;
}

.search-field.search-button {
    flex: 0 0 auto;
}

.search-field label {
    display: block;
    margin-bottom: 5px;
    font-weight: 600;
    color: #333;
    font-size: 14px;
}

.search-field input,
.search-field select {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
}

.search-field input:focus,
.search-field select:focus {
    outline: none;
    border-color: #3b5998;
    box-shadow: 0 0 0 2px rgba(59, 89, 152, 0.1);
}

/* Loading Indicator */
.loading-indicator {
    text-align: center;
    padding: 40px 20px;
    color: #666;
}

.loading-spinner {
    width: 40px;
    height: 40px;
    border: 4px solid #f3f3f3;
    border-top: 4px solid #3b5998;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 15px auto;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Flight Results */
.flight-results {
    margin-top: 20px;
}

.results-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
}

.results-header h4 {
    margin: 0;
    color: #333;
}

.results-count {
    color: #666;
    font-size: 14px;
}

.flight-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.flight-card {
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 20px;
    transition: box-shadow 0.2s, transform 0.2s;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.flight-card:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    transform: translateY(-1px);
}

.flight-card-content {
    flex: 1;
}

.flight-route {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
}

.airport-info {
    text-align: center;
    min-width: 80px;
}

.airport-code {
    font-size: 18px;
    font-weight: bold;
    color: #333;
    margin-bottom: 4px;
}

.airport-time {
    font-size: 13px;
    color: #666;
}

.flight-duration {
    flex: 1;
    text-align: center;
    padding: 0 20px;
}

.duration-line {
    position: relative;
    margin-bottom: 5px;
}

.duration-text {
    background: white;
    padding: 0 10px;
    font-size: 13px;
    color: #666;
    font-weight: 500;
}

.route-line {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 2px;
    background: #ddd;
    z-index: -1;
}

.stops-info {
    font-size: 12px;
    color: #999;
}

.flight-details {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.airline-info {
    display: flex;
    align-items: center;
    gap: 8px;
}

.airline-logo {
    width: 24px;
    height: 24px;
    object-fit: contain;
}

.airline-name {
    font-size: 14px;
    color: #666;
}

.flight-price {
    text-align: right;
}

.price {
    font-size: 20px;
    font-weight: bold;
    color: #3b5998;
}

.price-label {
    display: block;
    font-size: 12px;
    color: #999;
}

.flight-actions {
    margin-left: 20px;
}

.add-to-list-btn {
    background: #5cb85c;
    color: white;
    border: none;
    padding: 10px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: background-color 0.3s;
}

.add-to-list-btn:hover {
    background: #449d44;
}

.flight-pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid #eee;
}

/* Tabbed Section Styles */
.tabbed-section {
    margin-bottom: 30px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    overflow: hidden;
}

.tab-navigation {
    display: flex;
    background: #f8f9fa;
    border-bottom: 1px solid #dee2e6;
}

.tab-btn {
    flex: 1;
    padding: 15px 20px;
    border: none;
    background: transparent;
    cursor: pointer;
    font-size: 16px;
    font-weight: 500;
    color: #666;
    transition: all 0.3s;
}

.tab-btn:hover {
    background: rgba(59, 89, 152, 0.1);
    color: #3b5998;
}

.tab-btn.active {
    background: white;
    color: #3b5998;
    border-bottom: 3px solid #3b5998;
}

.tab-content {
    display: none;
    padding: 25px;
}

.tab-content.active {
    display: block;
}

.tab-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.tab-header h3 {
    margin: 0;
    color: #333;
    font-size: 20px;
}

.add-btn {
    background: #5cb85c;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
}

.add-btn:hover {
    background: #449d44;
}

/* List Item Styles */
.content-list {
    max-height: 600px;
    overflow-y: auto;
}

.list-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 15px;
    border: 1px solid #dee2e6;
    border-radius: 6px;
    margin-bottom: 10px;
    background: #f8f9fa;
    transition: transform 0.2s, box-shadow 0.2s;
}

.list-item:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.item-main {
    flex: 1;
}

/* Housing-specific styles */
.housing-name {
    font-weight: bold;
    font-size: 16px;
    color: #333;
    margin-bottom: 5px;
}

.housing-details {
    display: flex;
    gap: 15px;
    font-size: 14px;
    color: #666;
}

.rating {
    color: #ff9500;
}

/* Custom list styles */
.item-title {
    font-weight: bold;
    font-size: 16px;
    color: #333;
    margin-bottom: 5px;
}

.item-description {
    font-size: 14px;
    color: #666;
}

.item-price {
    font-weight: bold;
    font-size: 18px;
    color: #3b5998;
    margin: 0 20px;
}

.item-actions {
    display: flex;
    gap: 8px;
}

.btn-select, .btn-edit, .btn-delete, .btn-save, .btn-cancel {
    padding: 6px 12px;
    border: none;
    border-radius: 3px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
}

.btn-select {
    background: #3b5998;
    color: white;
}

.btn-select:hover {
    background: #2d4373;
}

.btn-edit {
    background: #ffc107;
    color: #333;
}

.btn-edit:hover {
    background: #e0a800;
}

.btn-delete {
    background: #dc3545;
    color: white;
}

.btn-delete:hover {
    background: #c82333;
}

.btn-save {
    background: #28a745;
    color: white;
}

.btn-save:hover {
    background: #218838;
}

.btn-cancel {
    background: #6c757d;
    color: white;
}

.btn-cancel:hover {
    background: #5a6268;
}

/* Add Item Form */
.add-item-form {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 6px;
    margin-bottom: 20px;
    border: 1px solid #dee2e6;
}

.form-group {
    margin-bottom: 15px;
}

.form-input {
    width: 100%;
    padding: 10px;
    border: 1px solid #ced4da;
    border-radius: 4px;
    font-size: 14px;
}

.form-input:focus {
    outline: none;
    border-color: #3b5998;
    box-shadow: 0 0 0 2px rgba(59, 89, 152, 0.1);
}

.form-actions {
    display: flex;
    gap: 10px;
}

/* Pagination */
.pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid #dee2e6;
}

.page-btn {
    padding: 8px 16px;
    border: 1px solid #dee2e6;
    background: white;
    color: #3b5998;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
}

.page-btn:hover:not(:disabled) {
    background: #f8f9fa;
}

.page-btn:disabled {
    color: #6c757d;
    cursor: not-allowed;
    opacity: 0.6;
}

.page-info {
    font-size: 14px;
    color: #666;
}

.trip-details {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.trip-info h3 {
    margin-bottom: 15px;
    color: #333;
}

.trip-info p {
    margin-bottom: 8px;
}

/* Responsive Design */
@media (max-width: 768px) {
    .search-row {
        flex-direction: column;
        gap: 10px;
    }
    
    .search-field {
        min-width: auto;
    }
    
    .tab-navigation {
        flex-direction: column;
    }
    
    .tab-btn {
        flex: none;
    }
    
    .tab-header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
    }
    
    .flight-card {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
    
    .flight-route {
        flex-direction: column;
        gap: 10px;
    }
    
    .flight-duration {
        padding: 10px 0;
    }
    
    .flight-actions {
        margin-left: 0;
        align-self: stretch;
    }
    
    .add-to-list-btn {
        width: 100%;
    }
    
    .list-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }
    
    .item-actions {
        align-self: stretch;
        justify-content: flex-end;
    }
    
    .item-price {
        margin: 0;
        align-self: flex-end;
    }
}
</style>
{% endblock %}